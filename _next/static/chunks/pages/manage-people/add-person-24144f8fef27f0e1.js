(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7800],{8247:function(e,r,t){"use strict";t.d(r,{U:function(){return l}});var n=t(8153),i=t(9154),o=t(5944),a=function(e){var r=e.as,t=void 0===r?"h2":r,n=e.children;return(0,o.tZ)(i.x,{as:t,fontSize:"md",fontWeight:"bold",children:n})},l=function(e){var r=e.as,t=e.background,i=void 0===t?"shade":t,l=e.children,c=e.title;return(0,o.BX)(n.kC,{as:r,flexDirection:"column",gap:1,background:i,padding:1.5,borderLeft:!0,borderLeftWidth:"xl",highContrastOutline:!0,children:[c?(0,o.tZ)(a,{children:c}):null,l]})}},3282:function(e,r,t){"use strict";t.d(r,{I:function(){return b},z:function(){return m}});var n=t(4942),i=t(5987),o=t(8153),a=t(8714),l=t(9065),c=t(8910),s=t(5944),u=["children"],d=["children"],f=["as","children","direction","className"];function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=function(e){var r=e.children,t=(0,i.Z)(e,u);return(0,s.tZ)(Z,p(p({as:c.h},t),{},{children:r}))},b=function(e){var r=e.children,t=(0,i.Z)(e,d);return(0,s.tZ)(Z,p(p({as:a.Yd},t),{},{children:r}))},g={name:"xyzkeb",styles:"align-self:flex-start"},Z=function(e){var r=e.as,t=e.children,n=e.direction,a=e.className,l=(0,i.Z)(e,f),c=v[n],u="left"===n;return(0,s.BX)(o.kC,p(p({as:r,className:a,inline:!0,gap:.5,alignItems:"center",fontFamily:"body",fontWeight:"normal",link:!0,focus:!0,css:g},l),{},{children:[u?(0,s.tZ)(c,{size:"sm"}):null,t,u?null:(0,s.tZ)(c,{size:"sm"})]}))},v={up:l.Hf,right:l.LZ,down:l.ve,left:l.Y4}},5025:function(e,r,t){"use strict";t.d(r,{x:function(){return a}});var n=t(1163),i=t(3282),o=t(5944),a=function(){var e=(0,n.useRouter)();return(0,o.tZ)(i.I,{onClick:function(){return e.back()},direction:"left",children:"Back"})}},1077:function(e,r,t){"use strict";t.d(r,{f:function(){return a}});var n=t(8153),i=t(8547),o=t(5944),a=function(e){var r=e.navigator,t=e.gap,a=void 0===t?1:t,l=e.reversed,c=e.children;return(0,o.tZ)(i.o,{children:l?(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.s,{columnSpan:{xs:12,md:r?8:12},children:(0,o.tZ)(n.Kq,{gap:a,children:c})}),r?(0,o.tZ)(i.s,{columnSpan:{xs:12,md:4,lg:3},columnStart:r?{lg:10}:void 0,children:r}):null]}):(0,o.BX)(o.HY,{children:[r?(0,o.tZ)(i.s,{columnSpan:{xs:12,md:4,lg:3},children:r}):null,(0,o.tZ)(i.s,{columnSpan:{xs:12,md:r?8:12},columnStart:r?{lg:5}:void 0,children:(0,o.tZ)(n.Kq,{gap:a,children:c})})]})})}},402:function(e,r,t){"use strict";t.d(r,{p:function(){return d}});var n=t(9499),i=t(8382),o=t(1008),a=t(7294),l=t(5944);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=function(e){return(0,a.forwardRef)(e)},d={TradingName:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Trading name",hint:"Details must match the name on your ABN registration",maxWidth:"xl",required:!0},e),{},{ref:r}))})),BusinessName:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Business name",hint:"Legal entity name",maxWidth:"xl",required:!0},e),{},{ref:r}))})),ABN:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Australian Business Number (ABN)",hint:"11 digits",maxWidth:"lg",required:!0},e),{},{ref:r}))})),ACN:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Australian Company Number (ACN)",hint:"Required for trusts and companies. 9 digits",maxWidth:"xl",required:!0},e),{},{ref:r}))})),Address:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Street address",hint:"Building and street",maxWidth:"xl",required:!0},e),{},{ref:r}))})),Suburb:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Town, city or suburb",maxWidth:"lg",required:!0},e),{},{ref:r}))})),State:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"State or territory",maxWidth:"sm",required:!0},e),{},{ref:r}))})),Postcode:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Postcode",maxWidth:"sm",required:!0},e),{},{ref:r}))})),Phone:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Phone number",maxWidth:"md",required:!0},e),{},{ref:r}))})),Email:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Email address",maxWidth:"xl",required:!0},e),{},{ref:r}))})),FirstName:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"First name",maxWidth:"xl",required:!0},e),{},{ref:r}))})),MiddleName:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Middle name/s",maxWidth:"xl",required:!0},e),{},{ref:r}))})),LastName:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Last name",maxWidth:"xl",required:!0},e),{},{ref:r}))})),BusinessRole:u((function(e,r){return(0,l.tZ)(i.P,s(s({label:"Your role in the business",options:[{label:"Owner",value:"owner"},{label:"Employee",value:"employee"}],required:!0},e),{},{ref:r}))})),Role:u((function(e,r){return(0,l.tZ)(i.P,s(s({label:"Role",placeholder:"Choose a role...",options:[{label:"Principal authority",value:"principal-authority"},{label:"Operations manager",value:"operations-manager"},{label:"Operations admin",value:"operations-admin"}],required:!0},e),{},{ref:r}))})),EstNO:u((function(e,r){return(0,l.tZ)(o.o,s(s({label:"Registered establishment number",hint:"This is the 4 digit registration number for the establishment",maxWidth:"md",required:!0},e),{},{ref:r}))})),Facility:u((function(e,r){return(0,l.tZ)(i.P,s(s({label:"Select a Facility",maxWidth:"xl",options:[{label:"Produce fresh processing",value:"produce-fresh-processing"},{label:"Produce fresh cold store",value:"produce-fresh-cold-store"}],required:!0},e),{},{ref:r}))}))}},5013:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return N}});var n,i=t(9499),o=t(4730),a=t(29),l=t(7794),c=t.n(l),s=t(2523),u=t(1077),d=t(8714),f=t(9154),h=t(6778),p=t(1163),m=t(5025),b=t(6573),g=t(402),Z=t(8247),v=(n={},(0,i.Z)(n,"produce-fresh-processing","Produce Fresh Processing"),(0,i.Z)(n,"produce-fresh-cold-store","Produce Fresh Cold Store"),n),O=t(7583),y=t(1282),P=t(7536),x=t(7294),w=t(870),j=t(5944),S=["role"];function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?q(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var B=y.db.users,N=function(){var e,r=(0,p.useRouter)(),t=(0,y.A$)("facility"),n=(e=v[t],(0,y.e3)("personID")),i=(0,y.aM)((function(){return B.get(null!==n&&void 0!==n?n:-1)}),[n]),l=(0,P.cI)({defaultValues:i}),q=l.register,N=l.handleSubmit,W=l.reset,D=(0,l.watch)("role");(0,x.useEffect)((function(){W(i)}),[W,i]);var E=function(){var e=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.role,n=(0,o.Z)(t,S),e.next=3,B.put(k(k({},n),{},{mobile_phone:"",work_phone:"",status:"Pending",createdAt:(new Date).toDateString(),permissions:[{role:{role:t.role},businessID:-1}]}));case 3:r.push({pathname:(0,w.GA)("MP"),query:{addSuccess:!0}});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,j.BX)(u.f,{gap:3,children:[(0,j.tZ)(m.x,{}),(0,j.BX)(u.f,{gap:1,children:[(0,j.tZ)(h.V,{heading:"Add person",children:"Provide the person's information to add them to management and control for this facility."}),(0,j.tZ)(f.x,{as:"p",color:"muted",fontSize:"xs",children:"All fields are required unless marked optional."})]}),(0,j.tZ)("form",{onSubmit:N(E),children:(0,j.BX)(b.R,{children:[(0,j.tZ)(g.p.Facility,k({label:"Select a Facility"},q("facility"))),(0,j.tZ)(g.p.FirstName,k({},q("first_name"))),(0,j.tZ)(g.p.LastName,k({},q("last_name"))),(0,j.tZ)(g.p.Email,k({label:"Email"},q("email_address"))),(0,j.BX)(s.eQ,{block:!0,hint:"Select a role to determine their permissions",label:"Role",required:!0,children:[(0,j.tZ)(s.Y8,k(k({},q("role")),{},{value:"operations-manager",children:"Operations manager"})),(0,j.tZ)(s.Y8,k(k({},q("role")),{},{value:"operations-admin",children:"Operations admin"})),(0,j.tZ)(s.Y8,k(k({},q("role")),{},{value:"occupier",children:"Occupier"}))]}),"operations-manager"===D?(0,j.BX)(u.f,{gap:1,children:[(0,j.tZ)(f.x,{as:"h3",fontSize:"lg",fontWeight:"bold",children:"Permissions"}),(0,j.tZ)(f.x,{as:"h4",fontSize:"sm",fontWeight:"bold",children:"This role can perform the following tasks on behalf of the business:"}),(0,j.tZ)(O.Mr,{children:(0,j.BX)("ul",{children:[(0,j.tZ)("li",{children:"Propose or vary an arrangement"}),(0,j.tZ)("li",{children:"Add, vary or remove people from management and control"}),(0,j.tZ)("li",{children:"Add, vary or remove operations"}),(0,j.tZ)("li",{children:"View and manage audits"}),(0,j.tZ)("li",{children:"Request quota allocation"})]})}),(0,j.tZ)(f.x,{as:"h4",fontSize:"sm",fontWeight:"bold",children:"This role can't perform the following tasks on behalf of the business:"}),(0,j.tZ)(O.Mr,{children:(0,j.tZ)("ul",{children:(0,j.tZ)("li",{children:"Sign-off on corrective actions"})})})]}):null,(0,j.tZ)(Z.U,{children:"Submitting this initiates the process to add a person to management and control of this establishment, it does not guarantee this person will be approved."}),(0,j.BX)(d.hE,{children:[(0,j.tZ)(d.zx,{type:"submit",children:"Add Person"}),(0,j.tZ)(w.BG,{page:"MP",variant:"secondary",children:"Back"}),(0,j.tZ)(w.BG,{page:"TODO",variant:"tertiary",children:"Save and exit"})]})]})})]})}},4645:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-people/add-person",function(){return t(5013)}])}},function(e){e.O(0,[2523,7583,8382,216,9774,2888,179],(function(){return r=4645,e(e.s=r);var r}));var r=e.O();_N_E=r}]);